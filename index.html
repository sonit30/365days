<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>365 Love Notes â€” For My Soulmate</title>
<style>
  :root{
    --pink-1:#ffeef8;
    --pink-2:#ffb6d5;
    --pink-3:#ff84bf;
    --accent:#ffffff;
    --muted:#f6d7e6;
    --shadow: 0 8px 28px rgba(255,129,182,0.18);
    --radius:16px;
    --calendar-width:260px;
    --gap:14px;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--pink-1),#fff);color:#3a1333}
  /* Password overlay */
  .overlay{
    position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(90deg,rgba(255,182,199,0.96),rgba(255,223,239,0.96));z-index:60
  }
  .pwd-card{width:min(640px,94%);background:linear-gradient(180deg,var(--accent),#fff);border-radius:20px;padding:28px;box-shadow:var(--shadow);text-align:center}
  .pwd-card h1{margin:0 0 6px;font-size:22px;color:#9b1b57}
  .pwd-card p{margin:0 0 18px;color:#6b2444}
  .pwd-input{display:flex;gap:8px;justify-content:center}
  .pwd-input input{padding:12px 16px;border-radius:12px;border:2px solid var(--pink-2);font-size:16px;width:260px}
  .pwd-input button{padding:12px 18px;border-radius:12px;background:var(--pink-3);border:none;color:white;font-weight:600;cursor:pointer}
  .pwd-hint{font-size:12px;margin-top:10px;color:#7a3a4e}
  /* Layout */
  .app{display:flex;gap:var(--gap);padding:22px;max-width:1200px;margin:32px auto}
  .sidebar{width:var(--calendar-width);background:linear-gradient(180deg,var(--muted),#fff);border-radius:18px;padding:16px;box-shadow:var(--shadow);height:calc(100vh - 120px);overflow:auto}
  .main{flex:1;background:linear-gradient(180deg,#fff, #fff7fb);border-radius:18px;padding:20px;box-shadow:var(--shadow);height:calc(100vh - 120px);overflow:auto}
  .brand{display:flex;align-items:center;gap:12px;margin-bottom:18px}
  .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--pink-2),var(--pink-3));display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:20px}
  .brand h2{margin:0;color:#9b1b57}
  /* Calendar grid */
  .calendar{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
  .day{position:relative;padding:10px;border-radius:10px;background:transparent;border:2px dashed rgba(155,27,87,0.12);text-align:center;cursor:pointer;user-select:none}
  .day.read{opacity:0.6}
  .day .num{font-weight:700;color:#9b1b57}
  .day .cut{position:absolute;inset:0;pointer-events:none;display:flex;align-items:center;justify-content:center}
  .day .cut::after{content:"âœ‚";font-size:22px;transform:rotate(-20deg);color:#9b1b57;opacity:0.95}
  .search{display:flex;gap:8px;margin-bottom:12px}
  .search input{flex:1;padding:10px;border-radius:10px;border:1px solid #ffd4e6}
  .search button{padding:10px 12px;border-radius:10px;border:none;background:var(--pink-3);color:white}
  /* Card area */
  .card-view{display:flex;flex-direction:column;gap:18px}
  .card{display:grid;grid-template-columns:140px 1fr;gap:18px;align-items:start;background:linear-gradient(180deg,var(--pink-1),#fff);padding:18px;border-radius:16px;border:1px solid rgba(155,27,87,0.06)}
  .card .img{width:140px;height:140px;border-radius:12px;overflow:hidden;background-size:cover;background-position:center;flex-shrink:0}
  .card .body{padding:6px}
  .card h3{margin:0 0 8px;color:#811a4a}
  .card p{margin:0 0 12px;line-height:1.6;white-space:pre-wrap}
  .card .meta{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .mark-read{padding:8px 12px;border-radius:10px;border:none;background:var(--pink-3);color:white;cursor:pointer}
  footer{margin-top:18px;text-align:center;color:#8b4a62;font-size:13px}

  /* Mobile responsive styles */
  @media (max-width:980px){
    .app{
      flex-direction:column;
      padding:12px;
    }
    .sidebar{
      width:100%;
      height:auto;
      order:2;
    }
    .main{
      order:1;
      height:auto;
    }
    .card{
      grid-template-columns:1fr;
      align-items:stretch;
    }
    .card .img{
      width:100%;
      height:320px; /* Full view image height */
      border-radius:0; /* Edge-to-edge look */
      background-size:cover;
      background-position:center;
    }
    .calendar{
      grid-template-columns:repeat(6,1fr);
    }
  }
</style>

</head>
<body>

<div class="overlay" id="overlay" aria-hidden="false">
  <div class="pwd-card" role="dialog" aria-modal="true">
    <div class="brand"><div class="logo">ðŸ’–</div><h1>Happy Birthday Yashveer!</h1></div>
    <p> Yashveer please enter the special date to open your private collection notes given by your Sonit till your next birthday.</p>
    <div class="pwd-input">
      <input id="pwd" placeholder="Enter password" type="password" aria-label="password input" />
      <button id="pwdBtn">Open</button>
    </div>
    <div class="pwd-hint">Hint: The default password is your<strong> DOB (6-digits) </strong></div>
  </div>
</div>

<div class="app" id="app" style="display:none">
  <aside class="sidebar" aria-label="calendar sidebar">
    <div class="brand"><div class="logo">ðŸ’Œ</div><h2>Your personal calender ji:</h2></div>

    <div class="search">
      <input id="daySearch" placeholder="Search day (1-365) or keyword" />
      <button id="gotoBtn">Go</button>
    </div>

    <div class="calendar" id="calendar" role="list" aria-label="365 day calendar">
      <!-- days generated by JS -->
    </div>

    <footer>
      <small>Tap a day to open the note. Read notes stay marked.</small>
    </footer>
  </aside>

  <main class="main" id="main">
    <div class="card-view" id="cardView">
      <div class="card" id="card">
        <div class="img" id="cardImg" style="background-image:url('Y.jpg')" role="img" aria-label="note image"></div>
        <div class="body">
          <h3 id="cardTitle">Welcome</h3>
          <p id="cardText"></p>
          <div class="meta">
            <div id="cardDay">Day â€”</div>
            <button class="mark-read" id="markReadBtn">Mark as read</button>
          </div>
        </div>
      </div>

    </div>
  </main>
</div>

<script>
(function(){
  // Password (change here if you want)
  const PASSWORD = '180802';

  // Local image filename (must be in same folder)
  const IMAGE_FILE = 'Y.jpg';

  // Read days stored key
  const readKey = 'love365_readDays_v1';

  // Grab DOM
  const overlay = document.getElementById('overlay');
  const pwdInput = document.getElementById('pwd');
  const pwdBtn = document.getElementById('pwdBtn');
  const app = document.getElementById('app');
  const calendar = document.getElementById('calendar');
  const cardImg = document.getElementById('cardImg');
  const cardTitle = document.getElementById('cardTitle');
  const cardText = document.getElementById('cardText');
  const cardDay = document.getElementById('cardDay');
  const markReadBtn = document.getElementById('markReadBtn');
  const daySearch = document.getElementById('daySearch');
  const gotoBtn = document.getElementById('gotoBtn');

  // Load read days from storage
  let readDays = new Set(JSON.parse(localStorage.getItem(readKey) || '[]'));
  let currentDay = null;

  // The user's full provided text (keeps original phrasing). We'll split and produce 365 short notes.
  const userText = `
Iâ€™ve never met you, yet youâ€™ve held me closer than anyone else ever could.

Your love is proof that the heart doesnâ€™t need touch to feel safe.

Even miles apart, you feel like home.

I havenâ€™t touched your hand, but Iâ€™ve held your heart.

Your patience makes me believe in unconditional love.

Somehow, you always know when Iâ€™m not okay.

Youâ€™ve been my voice of reason when I couldnâ€™t think clearly.

Youâ€™ve been the one who brings light to my shadows.

Youâ€™ve been my reason to believe in gentle love.

Youâ€™ve been my reminder that love is felt, not just seen.

Youâ€™ve been my constant thought in the quiet moments.

Youâ€™ve been my soft place to land after hard days.

Youâ€™ve been my calm tide after a stormy sea.

Youâ€™ve been my safe distance that feels closer than touch.

Youâ€™ve been my lesson in the beauty of waiting.

Youâ€™ve been my comfort even in complete silence.

Youâ€™ve been my evidence that real love canâ€™t be rushed.

Youâ€™ve been the gentle rhythm in my chaotic song.

Youâ€™ve been the smile behind my tears.

Youâ€™ve been the patient listener to my unspoken fears.

Youâ€™ve been the strength I borrow when mine runs out.

Youâ€™ve been the hand I imagine holding when Iâ€™m scared.

Youâ€™ve been my reminder that Iâ€™m not alone.

Youâ€™ve been my quiet prayer answered.

Youâ€™ve been my reason to trust again.

Youâ€™ve been my reminder that Iâ€™m worth the time.

Youâ€™ve been my emotional anchor in drifting seas.

Youâ€™ve been the one who reminds me to breathe.

Youâ€™ve been my warmth when the world felt cold.

Youâ€™ve been my reason to love myself more.

Youâ€™ve been my courage to open up.

Youâ€™ve been my safe thought when life gets loud.

Youâ€™ve been my quiet happiness on long days.

Youâ€™ve been the proof that love can be steady.

Youâ€™ve been the reminder that I matter.

Youâ€™ve been my voice in my head saying â€œyouâ€™re enough.â€

Youâ€™ve been the soft landing for my heavy thoughts.

Youâ€™ve been my safe space to share my truth.

Youâ€™ve been the comfort I didnâ€™t know I was missing.

Youâ€™ve been my steady light through my darkest nights.

Youâ€™ve been the soul that feels like itâ€™s known mine forever.

Youâ€™ve been the reason I feel less afraid of life.

Youâ€™ve been my reminder that good people still exist.

Youâ€™ve been the heartbeat in my quiet moments.

Youâ€™ve been my shelter in emotional storms.

Youâ€™ve been my reason to wake up hopeful.

Youâ€™ve been my reminder that love is not possession.

Youâ€™ve been my proof that love can cross oceans.

Youâ€™ve been my example of unconditional kindness.

Youâ€™ve been my safe anchor in a drifting world.

Youâ€™ve been my reason to laugh again.

Youâ€™ve been my emotional lighthouse.

Youâ€™ve been the reason my heart trusts slowly again.

Youâ€™ve been my quiet constant in a changing world.

Youâ€™ve been my hope that love lasts.

Youâ€™ve been the light that stays even when it rains.

Youâ€™ve been the one who never made me feel too much.

Youâ€™ve been my soft reality better than my dreams.

Youâ€™ve been my proof that distance means nothing.

Youâ€™ve been my reminder to keep believing.

Youâ€™ve been the calm to my overthinking mind.

Youâ€™ve been the one I turn to without thinking twice.

Youâ€™ve been my reason to trust my heart again.

Youâ€™ve been my proof that love doesnâ€™t have to hurt.

Youâ€™ve been my reason to write words like these.

Youâ€™ve been my gentle strength.

Youâ€™ve been my safe harbor in every storm.

Youâ€™ve been my quiet miracle.

Youâ€™ve been the one who understands without asking.

Youâ€™ve been my soft reassurance on hard nights.

Youâ€™ve been my reason to believe in fate.

Youâ€™ve been my reminder that love is worth the wait.

Youâ€™ve been my quiet partner in lifeâ€™s journey.

Youâ€™ve been my constant in all my seasons.

Youâ€™ve been my proof that hearts can connect across miles.

Youâ€™ve been my reason to believe in forever.

Youâ€™ve been my patience when I had none.

Youâ€™ve been my calm in my chaos.

Youâ€™ve been my steady reminder that I am loved.

Youâ€™ve been my light when the path was unclear.

Youâ€™ve been my comfort in my loneliness.

Youâ€™ve been my safe emotional home.

Youâ€™ve been my reminder that love doesnâ€™t demand.

Youâ€™ve been my softest thought before sleep.

Youâ€™ve been my warmest feeling after tears.

Youâ€™ve been my strength to get through hard weeks.

Youâ€™ve been my reason to keep faith.

Youâ€™ve been my joy in the middle of sorrow.

Youâ€™ve been my steady soul in uncertain times.

Youâ€™ve been my comfort even from afar.

Youâ€™ve been my proof that love can be gentle.

Youâ€™ve been my reason to smile unexpectedly.

Youâ€™ve been my warmth through the distance.

Youâ€™ve been my guide in emotional darkness.

Youâ€™ve been my reminder that Iâ€™m worth love.

Youâ€™ve been my hope in heartbreak.

Youâ€™ve been my patient listener.

Youâ€™ve been my favorite â€œhow was your day?â€

Youâ€™ve been my invisible hug.

Youâ€™ve been my proof that connection is real.

Youâ€™ve been my gentle reminder to take care of myself.

Youâ€™ve been my unexpected joy.

Youâ€™ve been my reminder to trust the process.

Youâ€™ve been my partner in unspoken understanding.

Youâ€™ve been my constant in the unknown.

Youâ€™ve been my anchor when I drift.

Youâ€™ve been my reason to breathe easier.

Youâ€™ve been my reminder that love doesnâ€™t expire.

Youâ€™ve been my peace when Iâ€™m restless.

Youâ€™ve been my quiet cheer on my hard days.

Youâ€™ve been my warmth in cold memories.

Youâ€™ve been my proof that love is more than romance.

Youâ€™ve been my gentle â€œIâ€™m hereâ€ in silence.

Youâ€™ve been my reason to feel safe.

Youâ€™ve been my heartâ€™s resting place.

Youâ€™ve been my whisper of hope.

Youâ€™ve been my emotional backbone.

Youâ€™ve been my reminder that not all goodbyes hurt.

Youâ€™ve been my steady light in long nights.

Youâ€™ve been my reason to look forward.

Youâ€™ve been my soulâ€™s quiet twin.

Youâ€™ve been my comfort zone in uncertainty.

Youâ€™ve been my reminder that hearts heal.

Youâ€™ve been my proof that love is a verb.

Youâ€™ve been my safe thought on anxious days.

Youâ€™ve been my quiet victory.

Youâ€™ve been my healing presence.

Youâ€™ve been my reminder that love can feel like home.

Youâ€™ve been my emotional oxygen.

Youâ€™ve been my reason to believe in invisible bonds.

Youâ€™ve been my answer to unasked questions.

Youâ€™ve been my reminder to slow down and feel.

Youâ€™ve been my emotional sunrise.

Youâ€™ve been my hope in the dark.

Youâ€™ve been my steady pulse.

Youâ€™ve been my proof that love can be peaceful.

Youâ€™ve been my invisible but constant hug.

Youâ€™ve been my reason to share my heart.

Youâ€™ve been my favorite thought of the day.

Youâ€™ve been my safe shore.

Youâ€™ve been my calm before I fall asleep.

Youâ€™ve been my reminder that love listens.

Youâ€™ve been my gentle support.

Youâ€™ve been my reminder to keep going.

Youâ€™ve been my proof that love is patient.

Youâ€™ve been my emotional homecoming.

Youâ€™ve been my reason to dream again.

Youâ€™ve been my unshakable constant.

Youâ€™ve been my warmth in the waiting.

Youâ€™ve been my proof that love adapts.

Youâ€™ve been my gentle guide.

Youâ€™ve been my reason to trust the future.

Youâ€™ve been my source of quiet joy.

Youâ€™ve been my reminder to open my heart.

Youâ€™ve been my unexpected forever.

Youâ€™ve been my emotional anchor chain.

Youâ€™ve been my gift from the universe.

Youâ€™ve been my reminder that love doesnâ€™t vanish.

Youâ€™ve been my constant thought in uncertainty.

Youâ€™ve been my soft smile in the dark.

Youâ€™ve been my proof that love finds a way.

Youâ€™ve been my reason to write poetry.

Youâ€™ve been my warmth when Iâ€™m cold inside.

Youâ€™ve been my proof that love nurtures.

Youâ€™ve been my healing space.

Youâ€™ve been my constant star.

Youâ€™ve been my reminder that love holds steady.

Youâ€™ve been my proof that care is love.

Youâ€™ve been my reason to hope for more.

Youâ€™ve been my soulâ€™s companion.

Youâ€™ve been my gentle sunrise.

Youâ€™ve been my proof that love softens hearts.

Youâ€™ve been my peaceful moment.

Youâ€™ve been my safe harbor always.

Youâ€™ve been my proof that love endures.

Youâ€™ve been my constant through miles.

Youâ€™ve been my safe path.

Youâ€™ve been my reminder that love uplifts.

Youâ€™ve been my healing touch without touch.

Youâ€™ve been my soulâ€™s reassurance.

Youâ€™ve been my constant whisper of care.

Youâ€™ve been my reminder that love sees you.

Youâ€™ve been my proof that kindness is love.

Youâ€™ve been my patient heart.

Youâ€™ve been my gentle constant.

Youâ€™ve been my reason to believe in you.

Youâ€™ve been my steady calm in storms.

Youâ€™ve been my softest thought.

Youâ€™ve been my reason to feel safe at night.

Youâ€™ve been my healing light.

Youâ€™ve been my hope in stillness.

Youâ€™ve been my safe corner in my mind.

Youâ€™ve been my emotional warmth.

Youâ€™ve been my reason to feel peace.

Youâ€™ve been my quiet blessing.

Youâ€™ve been my proof that love stays.

Youâ€™ve been my healing miracle.

Youâ€™ve been my comfort across the miles.

Youâ€™ve been my calm when Iâ€™m restless.

Youâ€™ve been my gentle reminder Iâ€™m not alone.

Youâ€™ve been my heartâ€™s companion.

Youâ€™ve been my safe emotional shelter.

Youâ€™ve been my reminder that love heals slowly.

Youâ€™ve been my proof that love chooses to stay.

Youâ€™ve been my light through uncertainty.

Youâ€™ve been my constant faith.

Youâ€™ve been my peaceful thought.

Youâ€™ve been my reminder to love softly.

Youâ€™ve been my invisible yet present hug.

Youâ€™ve been my calm wave in chaos.

Youâ€™ve been my steady smile.

Youâ€™ve been my reminder to never stop believing.

Youâ€™ve been my quiet happiness in busy days.

Youâ€™ve been my reason to look forward to tomorrow.

Youâ€™ve been my hope wrapped in care.

Youâ€™ve been my safe person.

Youâ€™ve been my gentle anchor.

Youâ€™ve been my patient forever.

Youâ€™ve been my reminder that love waits.

Youâ€™ve been my steady promise.

Youâ€™ve been my peaceful safe place.

Youâ€™ve been my heartâ€™s gratitude.

Youâ€™ve been my quiet constant through time.

Youâ€™ve been my reason to still believe in magic.

Youâ€™ve been my emotional sunlight.

Youâ€™ve been my safe embrace from afar.

Youâ€™ve been my proof that love is strength.

Youâ€™ve been my gentle forever.

Youâ€™ve been my reminder that love listens deeply.

Youâ€™ve been my safe anchor in storms.

Youâ€™ve been my proof that love crosses borders.

Youâ€™ve been my patient sunrise.

Youâ€™ve been my soulâ€™s peace.

Youâ€™ve been my steady heartbeat across miles.

Youâ€™ve been my reminder that I am loved.

Youâ€™ve been my proof that love is enough.

Youâ€™ve been my invisible shelter.

Youâ€™ve been my healing hug without touch.

Youâ€™ve been my safe love.

Youâ€™ve been my constant gift.

And through every day, every mile, and every silence, youâ€™ve been my heartâ€™s quiet home.
  `;

  // Split logic: break into lines & sentences then ensure exactly 365 notes.
  function makeNotesFromText(bigText, targetCount){
    // First, split by blank lines to get paragraphs
    const parts = bigText.split(/\n+/).map(s=>s.trim()).filter(Boolean);

    // Extract sentences from each part using punctuation boundaries, but keep short
    const sentences = [];
    parts.forEach(p=>{
      // try to split into sentence-like pieces
      const se = p.match(/[^.!?]+[.!?]?/g) || [p];
      se.forEach(s=>{
        const t = s.trim();
        if(t) sentences.push(t.replace(/\s+/g,' '));
      });
    });

    // If sentences are fewer than targetCount, we will also try to split longer sentences by commas
    if(sentences.length < targetCount){
      const extra = [];
      sentences.forEach(s=>{
        if(extra.length + sentences.length >= targetCount) return;
        // split by " , " or " and " carefully
        const partsByComma = s.split(/[,;â€”â€“:-]+/).map(x=>x.trim()).filter(Boolean);
        if(partsByComma.length > 1){
          partsByComma.forEach(pp=>{ if(pp) extra.push(pp + (/[.!?]$/.test(pp)?'':'') ); });
        }
      });
      // append extras
      extra.forEach(e=>{ if(sentences.length < targetCount) sentences.push(e); });
    }

    // Now if still fewer, we will cycle through to create targetCount items (re-use but keep them short)
    const notes = [];
    if(sentences.length === 0){
      for(let i=0;i<targetCount;i++) notes.push("You are loved.");
      return notes;
    }

    // Normalize length: prefer 1-2 sentence notes. If a sentence is long (>180 chars) split into smaller chunks
    const normalized = [];
    sentences.forEach(s=>{
      if(s.length > 160){
        // split by comma or ' and '
        const pieces = s.split(/,| and | but | while |;|â€”|â€“/).map(x=>x.trim()).filter(Boolean);
        pieces.forEach(p=>{ if(p) normalized.push(p.endsWith('.')||p.endsWith('!')||p.endsWith('?') ? p : p+'.'); });
      } else {
        normalized.push(s.endsWith('.')||s.endsWith('!')||s.endsWith('?') ? s : s + (s.length>0?'.':''));
      }
    });

    // Use normalized as base
    let base = normalized.filter(Boolean);

    // If still less than needed, repeat cycling with slight variation (keeps original content)
    while(base.length < targetCount){
      const needed = targetCount - base.length;
      for(let i=0;i<needed && i<base.length;i++){
        base.push(base[i]);
      }
      if(base.length === 0) break;
    }

    // If more than needed, trim
    if(base.length > targetCount) base = base.slice(0, targetCount);

    // Final tidy: ensure no trailing spaces, limited length
    return base.map((s,i)=> s.replace(/\s+/g,' ').trim());
  }

  // build 365 notes
  const NOTES_COUNT = 365;
  const NOTES = makeNotesFromText(userText, NOTES_COUNT);

  // --- FIX: override day 357 with a custom assistant note to avoid the earlier error ---
  // day 357 corresponds to index 356 (0-based)
  const assistantNote = " You accepted me with all my scars. ðŸ’–";
  if(NOTES.length >= 357){
    NOTES[356] = assistantNote;
  } else {
    // pad if somehow shorter, then set
    while(NOTES.length < 356) NOTES.push("");
    NOTES[356] = assistantNote;
    // ensure length matches NOTES_COUNT
    while(NOTES.length < NOTES_COUNT) NOTES.push("");
  }

  // Build calendar grid
  function renderCalendar(){
    calendar.innerHTML = '';
    for(let i=1;i<=NOTES_COUNT;i++){
      const d = document.createElement('button');
      d.className = 'day';
      d.setAttribute('role','listitem');
      d.dataset.day = i;
      d.innerHTML = `<div class="num">${i}</div>`;
      if(readDays.has(String(i))){
        d.classList.add('read');
        const c = document.createElement('div'); c.className='cut'; d.appendChild(c);
      }
      d.addEventListener('click', ()=> openDay(i));
      calendar.appendChild(d);
    }
  }

  // Open a day and show note
  function openDay(n){
    currentDay = n;
    const note = NOTES[n-1] || ("Love note " + n);
    cardImg.style.backgroundImage = `url('${IMAGE_FILE}')`;
    cardTitle.textContent = `Love Note â€” Day ${n}`;
    cardText.textContent = note;
    cardDay.textContent = `Day ${n}`;

    if(readDays.has(String(n))){
      markReadBtn.textContent = 'Already read';
      markReadBtn.disabled = true;
      markReadBtn.style.opacity = 0.75;
    } else {
      markReadBtn.textContent = 'Mark as read';
      markReadBtn.disabled = false;
      markReadBtn.style.opacity = 1;
    }

    // Highlight selected day visually a bit (scroll into view)
    const dayBtn = calendar.querySelector(`[data-day='${n}']`);
    if(dayBtn) dayBtn.scrollIntoView({behavior:'smooth',block:'center'});
  }

  // Mark a day read
  function markRead(n){
    readDays.add(String(n));
    localStorage.setItem(readKey, JSON.stringify(Array.from(readDays)));
    const dayBtn = calendar.querySelector(`[data-day='${n}']`);
    if(dayBtn && !dayBtn.querySelector('.cut')){
      dayBtn.classList.add('read');
      const c = document.createElement('div'); c.className='cut'; dayBtn.appendChild(c);
    }
    markReadBtn.textContent = 'Already read';
    markReadBtn.disabled = true;
    markReadBtn.style.opacity = 0.75;
  }

  // Search/goto
  function goToQuery(q){
    if(!q) return;
    const num = parseInt(q,10);
    if(!isNaN(num) && num >=1 && num <= NOTES_COUNT){
      openDay(num);
      return;
    }
    // otherwise simple keyword search in notes
    q = q.toLowerCase();
    for(let i=0;i<NOTES_COUNT;i++){
      const note = (NOTES[i]||"").toLowerCase();
      if(note.includes(q)){ openDay(i+1); return; }
    }
    alert('No note found for: "' + q + '"');
  }

  // Password handling
  function openApp(){
    overlay.style.display = 'none';
    overlay.setAttribute('aria-hidden','true');
    app.style.display = '';
    renderCalendar();
    // optionally open first unread day
    const firstUnread = (function(){
      for(let i=1;i<=NOTES_COUNT;i++) if(!readDays.has(String(i))) return i;
      return 1;
    })();
    openDay(firstUnread);
  }

  pwdBtn.addEventListener('click',()=>{
    if(pwdInput.value === PASSWORD){
      openApp();
    } else {
      pwdInput.value = '';
      pwdInput.placeholder = 'Wrong password â€” try again';
      pwdInput.focus();
    }
  });

  pwdInput.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') pwdBtn.click(); });
  markReadBtn.addEventListener('click', ()=>{ if(currentDay) markRead(currentDay); });
  gotoBtn.addEventListener('click', ()=> goToQuery(daySearch.value.trim()));
  daySearch.addEventListener('keydown',(e)=>{ if(e.key==='Enter') gotoBtn.click(); });

  // keyboard nav
  document.addEventListener('keydown',(e)=>{
    if(app.style.display === ''){
      if(e.key === 'ArrowRight') openDay(Math.min(NOTES_COUNT, (currentDay||1) + 1));
      if(e.key === 'ArrowLeft') openDay(Math.max(1, (currentDay||1) - 1));
      if(e.key === 'r' || e.key === 'R') if(currentDay) markRead(currentDay);
    }
  });

  // initial: show overlay (locked) â€” unless you want auto-open for dev/testing:
  // openApp();

})();
</script>
</body>
</html>
